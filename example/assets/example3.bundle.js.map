{"version":3,"sources":["webpack:///webpack/bootstrap f0a2075b2b728cc59805","webpack:///./node_modules/script-loader/addScript.js","webpack:///./example/example3.js?9b1e","webpack:///./example/example3.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,EAAE;AACF;AACA;AACA;;;;;;;;AC1BA,iD;;;;;;;ACAA,mFAAmF,kBAAkB,4VAA4V,sNAAsN,2GAA2G,iHAAiH,0HAA0H,YAAY,QAAQ,kEAAkE,+9BAA+9B,2sCAA2sC,kCAAkC,0FAA0F,gBAAgB,kGAAkG,iCAAiC,0KAA0K,wBAAwB,sBAAsB,0EAA0E,mBAAmB,uFAAuF,aAAa,WAAW,8FAA8F,mDAAmD,oGAAoG,4MAA4M,6FAA6F,sIAAsI,wDAAwD,8BAA8B,uXAAuX,8EAA8E,OAAO,MAAM,4DAA4D,0CAA0C,2DAA2D,YAAY,2DAA2D,gEAAgE,0DAA0D,sHAAsH,6CAA6C,2JAA2J,8DAA8D,kGAAkG,4gBAA4gB,4HAA4H,sbAAsb,kDAAkD,sBAAsB,MAAM,wBAAwB,2DAA2D,yBAAyB,uHAAuH,kDAAkD,8CAA8C,sEAAsE,+HAA+H,wBAAwB,GAAG,I","file":"example3.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 592);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f0a2075b2b728cc59805","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nmodule.exports = function(src) {\n\tfunction log(error) {\n\t\t(typeof console !== \"undefined\")\n\t\t&& (console.error || console.log)(\"[Script Loader]\", error);\n\t}\n\n\t// Check for IE =< 8\n\tfunction isIE() {\n\t\treturn typeof attachEvent !== \"undefined\" && typeof addEventListener === \"undefined\";\n\t}\n\n\ttry {\n\t\tif (typeof execScript !== \"undefined\" && isIE()) {\n\t\t\texecScript(src);\n\t\t} else if (typeof eval !== \"undefined\") {\n\t\t\teval.call(null, src);\n\t\t} else {\n\t\t\tlog(\"EvalError: No eval function available\");\n\t\t}\n\t} catch (error) {\n\t\tlog(error);\n\t}\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/script-loader/addScript.js\n// module id = 37\n// module chunks = 0 3 4 5","require(\"!!/home/jenkins-slave/workspace/mapd-charting-gh-pages/build_docs/node_modules/script-loader/addScript.js\")(require(\"!!/home/jenkins-slave/workspace/mapd-charting-gh-pages/build_docs/node_modules/raw-loader/index.js!/home/jenkins-slave/workspace/mapd-charting-gh-pages/build_docs/example/example3.js\"))\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./example/example3.js\n// module id = 592\n// module chunks = 5","module.exports = \"document.addEventListener(\\\"DOMContentLoaded\\\", function init() {\\n  var config = {\\n    table: \\\"contributions_donotmodify\\\",\\n    valueColumn: \\\"amount\\\",\\n    joinColumn: \\\"contributor_zipcode\\\",\\n    polyTable: \\\"zipcodes\\\",\\n    polyJoinColumn: \\\"ZCTA5CE10\\\",\\n    timeColumn: \\\"contrib_date\\\",\\n    timeLabel: \\\"Number of Contributions\\\",\\n    domainBoundMin: 1,\\n    domainBoundMax: 2600, //00000,\\n    numTimeBins: 423\\n  }\\n\\n  new MapdCon()\\n    .protocol(\\\"https\\\")\\n    .host(\\\"metis.mapd.com\\\")\\n    .port(\\\"443\\\")\\n    .dbName(\\\"mapd\\\")\\n    .user(\\\"mapd\\\")\\n    .password(\\\"HyperInteractive\\\")\\n    .connect(function(error, con) {\\n      crossfilter\\n        .crossfilter(con, \\\"contributions_donotmodify\\\")\\n        .then(function(cf) {\\n          crossfilter\\n            .crossfilter(con, \\\"contributions_donotmodify\\\")\\n            .then(cf2 => {\\n              createPolyMap(cf, con, dc, config, cf2)\\n              createTimeChart(cf, dc, config, cf2)\\n            })\\n        })\\n    })\\n\\n  function createPolyMap(crossFilter, con, dc, config, cf2) {\\n    window.cf = crossFilter\\n    var parent = document.getElementById(\\\"polymap\\\")\\n    // The values in the table and column specified in crossFilter.dimension\\n    // must correspond to values in the table and keysColumn specified in polyRasterChart.polyJoin.\\n    var dim = crossFilter.dimension(config.joinColumn) // Values to join on.\\n    // var grp = dim\\n    //   .group()\\n    //   .reduceAvg(\\\"contributions_donotmodify.amount\\\", \\\"avgContrib\\\") // Values to color on.\\n    // // var dim = crossFilter.dimension(\\\"tweets_nov_feb.state_abbr\\\") // Values to join on.\\n    // // var grp = dim.group().reduceAvg(\\\"tweets_nov_feb.tweet_count\\\") // Values to color on.\\n\\n    // Can use getDomainBounds to dynamically find min and max of values that will be colored,\\n    // or the domain [min, max] can be set directly\\n    // (in which case nesting chart creation inside this callback is unnecessary).\\n    getDomainBounds(config.valueColumn, cf2.groupAll(), function(domainBounds) {\\n      // Can set colorDomain directly or use domainFromBoundsAndRange to generate a .\\n      var colorRange = [\\n        \\\"#115f9a\\\",\\n        \\\"#1984c5\\\",\\n        \\\"#22a7f0\\\",\\n        \\\"#48b5c4\\\",\\n        \\\"#76c68f\\\",\\n        \\\"#a6d75b\\\",\\n        \\\"#c9e52f\\\",\\n        \\\"#d0ee11\\\",\\n        \\\"#d0f400\\\"\\n      ]\\n      var colorDomain = [config.domainBoundMin, config.domainBoundMax]\\n      // domainFromBoundsAndRange(\\n      //   config.domainBoundMin,\\n      //   config.domainBoundMax,\\n      //   colorRange\\n      // )\\n      // var colorDomain = domainFromBoundsAndRange(domainBounds.minimum, domainBounds.maximum, colorRange)\\n      var mapboxToken =\\n        \\\"pk.eyJ1IjoibWFwZCIsImEiOiJjaWV1a3NqanYwajVsbmdtMDZzc2pneDVpIn0.cJnk8c2AxdNiRNZWtx5A9g\\\"\\n\\n      var polyMap = dc\\n        .rasterChart(parent, true)\\n        .con(con)\\n        .height(height() / 1.5)\\n        .width(width())\\n        .mapUpdateInterval(750) // ms\\n        .mapStyle(\\\"mapbox://styles/mapbox/light-v8\\\")\\n        .mapboxToken(mapboxToken) // need a mapbox accessToken for loading the tiles\\n\\n      var polyLayer = dc\\n        .rasterLayer(\\\"polys\\\")\\n        .crossfilter(crossFilter)\\n        .dimension(dim)\\n        .setState({\\n          data: [\\n            {\\n              table: config.table,\\n              attr: config.joinColumn\\n            },\\n            {\\n              table: config.polyTable,\\n              attr: config.polyJoinColumn\\n            }\\n          ],\\n          mark: {\\n            type: \\\"poly\\\",\\n            strokeColor: \\\"white\\\",\\n            strokeWidth: 0,\\n            lineJoin: \\\"miter\\\",\\n            miterLimit: 10\\n          },\\n          encoding: {\\n            color: {\\n              type: \\\"quantitative\\\",\\n              aggregrate: `SUM(${config.valueColumn})`,\\n              domain: colorDomain,\\n              range: colorRange\\n            }\\n          }\\n        })\\n\\n      polyLayer.popupColumns([\\\"key0\\\", \\\"color\\\"])\\n      polyLayer.popupColumnsMapped({\\\"key0\\\": \\\"zipcode\\\", \\\"color\\\": \\\"total amount\\\"})\\n\\n      polyMap\\n        .pushLayer(\\\"polys\\\", polyLayer)\\n        .init()\\n        .then(() => {\\n          // polyMap.borderWidth(zoomToBorderWidth(polyMap.map().getZoom()))\\n          // Keeps the border widths reasonable regardless of zoom level.\\n          polyMap.map().on(\\\"zoom\\\", function() {\\n            // polyMap.borderWidth(zoomToBorderWidth(polyMap.map().getZoom()))\\n          })\\n\\n          dc.renderAllAsync()\\n\\n          window.addEventListener(\\n            \\\"resize\\\",\\n            _.debounce(function() {\\n              resizeChart(polyMap, 1.5)\\n            }, 500)\\n          )\\n        })\\n\\n      // hover effect with popup\\n      var debouncedPopup = _.debounce(displayPopupWithData, 250)\\n      polyMap.map().on(\\\"mousewheel\\\", polyMap.hidePopup)\\n      polyMap.map().on(\\\"wheel\\\", polyMap.hidePopup)\\n      polyMap.map().on(\\\"mousemove\\\", polyMap.hidePopup)\\n      polyMap.map().on(\\\"mousemove\\\", debouncedPopup)\\n      function displayPopupWithData(event) {\\n        polyMap.getClosestResult(event.point, polyMap.displayPopup)\\n      }\\n    })\\n  }\\n\\n  function getDomainBounds(column, groupAll, callback) {\\n    groupAll\\n      .reduce([\\n        { expression: column, agg_mode: \\\"min\\\", name: \\\"minimum\\\" },\\n        { expression: column, agg_mode: \\\"max\\\", name: \\\"maximum\\\" }\\n      ])\\n      .valuesAsync(true)\\n      .then(callback)\\n  }\\n\\n  function domainFromBoundsAndRange(min, max, range) {\\n    return _.range(0, range.length).map(\\n      (_, i) => min + Math.round(i * max / (range.length - 1))\\n    )\\n  }\\n\\n  function zoomToBorderWidth(zoomLevel) {\\n    var MIN_ZOOM = 0.8626373575587937\\n    var ZOOM_BORDER_DIVISOR = 20\\n    return zoomLevel / ZOOM_BORDER_DIVISOR - MIN_ZOOM / ZOOM_BORDER_DIVISOR\\n  }\\n\\n  function createTimeChart(crossFilter, dc, config, cf2) {\\n    getDomainBounds(config.timeColumn, cf2.groupAll(), function(\\n      timeChartBounds\\n    ) {\\n      var timeChartDimension = crossFilter.dimension(config.timeColumn)\\n      var timeChartGroup = timeChartDimension.group().reduceCount(\\\"*\\\")\\n\\n      var timeChart = dc\\n        .lineChart(\\\"#timechart\\\")\\n        .width(width())\\n        .height(height() / 2.5)\\n        .elasticY(true)\\n        .renderHorizontalGridLines(true)\\n        .brushOn(true)\\n        .xAxisLabel(\\\"Time\\\")\\n        .yAxisLabel(config.timeLabel)\\n        .dimension(timeChartDimension)\\n        .group(timeChartGroup)\\n        .binParams({\\n          numBins: config.numTimeBins,\\n          binBounds: [timeChartBounds.minimum, timeChartBounds.maximum]\\n        })\\n\\n      timeChart.x(\\n        d3.time.scale\\n          .utc()\\n          .domain([timeChartBounds.minimum, timeChartBounds.maximum])\\n      )\\n      timeChart.yAxis().ticks(5)\\n      timeChart\\n        .xAxis()\\n        .scale(timeChart.x())\\n        .tickFormat(dc.utils.customTimeFormat)\\n        .orient(\\\"bottom\\\")\\n\\n      dc.renderAllAsync()\\n\\n      window.addEventListener(\\n        \\\"resize\\\",\\n        _.debounce(function() {\\n          resizeChart(timeChart, 2.5)\\n        }, 500)\\n      )\\n    })\\n  }\\n\\n  function width() {\\n    return document.documentElement.clientWidth - 30\\n  }\\n\\n  function height() {\\n    return (\\n      Math.max(document.documentElement.clientHeight, window.innerHeight || 0) -\\n      200\\n    )\\n  }\\n\\n  function resizeChart(chart, heightDivisor) {\\n    if (typeof chart.map === \\\"function\\\") {\\n      chart.map().resize()\\n      chart.isNodeAnimate = false\\n    }\\n    chart\\n      .width(width())\\n      .height(height() / heightDivisor)\\n      .renderAsync()\\n    dc.redrawAllAsync()\\n  }\\n\\n  function noop() {}\\n})\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/raw-loader!./example/example3.js\n// module id = 593\n// module chunks = 5"],"sourceRoot":""}